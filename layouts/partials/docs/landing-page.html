<!-- Main docs page -->
<div class="columns is-2 is-multiline is-desktop is-landingpage">
  {{ $numSections := len .Sections}}
  {{ $maxPages := 3 }}
  {{ if le $numSections 3 }} <!-- 3 sections fill  -->
    {{ $maxPages = 16 }}
  {{ end }}
  {{ if le $numSections 7 }} <!-- 3 sections fill  -->
    {{ $maxPages = 16 }}
  {{ end }}
  {{ range .Sections }}
  {{ $sectionUrl := .RelPermalink }}
  {{ $numPages := len .Pages }}
  <div class="column is-4">
    <div class="card is-shadowless">
      <div class="card-content content">
        <h3 class="has-text-primary">
          <a href="{{ $sectionUrl }}">
            {{ .Name }}
          </a>
        </h3>

        <p>
          {{ .Params.description | markdownify }}
        </p>

        <hr />

        <ul>
          {{ range first $maxPages .Pages }}
          <li>
            <a href="{{ .RelPermalink }}">
              {{ .Title }}
            </a>
          </li>
          {{ end }}
          {{ if gt $numPages $maxPages }}
          <li>
            <a href="{{ $sectionUrl }}">
              More...
            </a>
          </li>
          {{ end }}
        </ul>
      </div>
    </div>
  </div>
  {{ end }}
</div>
